"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.msgpackableAxios = void 0;
const tslib_1 = require("tslib");
const axios_1 = tslib_1.__importDefault(require("axios"));
const msgpackr_1 = require("msgpackr");
const noDataMethods = new Set(['get', 'head']);
exports.msgpackableAxios = axios_1.default.create({
    responseType: "arraybuffer",
    transformRequest: [
        function (data, headers) {
            if (noDataMethods.has(this.method.toLowerCase()))
                return;
            headers["Content-Type"] = "application/msgpack";
            return (0, msgpackr_1.pack)(data);
        },
    ],
    transformResponse: [(data) => (0, msgpackr_1.unpack)(data)],
    headers: {
        Accept: "application/msgpack",
    },
});
